# Helmsman

helmRepos:
  metallb: https://metallb.github.io/metallb

namespaces:
  default:
  metallb-system:

apps:
  metallb:
    namespace: metallb-system
    enabled: true
    wait: true
    chart: metallb/metallb
    version: 0.14.5
    valuesFile: metallb.yml
    priority: -4

  kafka:
    namespace: default
    enabled: true
    wait: true
    chart: oci://registry-1.docker.io/bitnamicharts/kafka
    version: 28.1.1
    priority: -3
    set:
      controller.replicaCount: 1
      controller.livenessProbe.initialDelaySeconds: 120
      extraConfig: |
        offsets.topic.replication.factor=1
        transaction.state.log.replication.factor=1
        log.retention.hours=24
        log.retention.bytes=2147483648

  payload-processor:
    namespace: default
    enabled: true
    chart: payload-processor
    version: 0.1.0
    priority: -2
    set:
      image.tag: "payload-processor-$COMMIT_SHA"

  rest-api:
    namespace: default
    enabled: true
    chart: rest-api
    version: 0.1.0
    priority: -1
    set:
      image.tag: "rest-api-$COMMIT_SHA"
